<script src="/socket.io/socket.io.js"></script>
<script>
  var socket = io.connect('http://localhost:8000/minesweeper');
  var board = [];
  var moveId = 0;

  socket.on('errorMsg', function (cid, data) {
     console.log(cid, data);
  });
  socket.on('gameCreated', function (cid, data) {
     moveId = 1;
     console.log(cid, data);
     console.log(board);
  });
  socket.on('moveMade', function (cid, data) {
     moveId++;
    console.log(cid, data);
    for (let revealData of data.revealedCells) {
       board[revealData.xCell][revealData.yCell] = revealData.content;
    }
     console.log(board);
  });

  function createGame(xSize, ySize, mineCount) {
     socket.emit('createGame', 'createGame', {xSize, ySize, mineCount});
     for (let ii = 0; ii < xSize; ii++) {
        const row = [];
        board[ii] = row;
        for (let jj = 0; jj < ySize; jj++) {
           row[jj] = '?';
        }
     }
  }

  function makeMove(xCell, yCell) {
     const cid = 'move #' + moveId;
     socket.emit('makeMove', cid, {moveId, xCell, yCell});
  }
</script>
